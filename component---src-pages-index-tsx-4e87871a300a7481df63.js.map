{"version":3,"sources":["webpack:///./src/services/Airtable.tsx","webpack:///./src/components/restaurant-list/RestaurantList.jsx","webpack:///./src/pages/index.tsx","webpack:///./src/components/container/Container.tsx","webpack:///./src/components/row/Row.tsx","webpack:///./src/components/intro/Intro.tsx"],"names":["base","Airtable","apiKey","RestaurantList","_ref","restaurants","pageSize","_React$useState","React","pageView","setPageView","showButton","length","react","slice","map","restaurant","index","key","get","href","target","className","s","button","onClick","p","RestaurantSearch","query","setQuery","_React$useState2","records","setRecords","handleSubmit","e","preventDefault","select","maxRecords","view","filterByFormula","toLowerCase","FetchRestaurants","eachPage","results","fetchNextPage","element","document","getElementById","scrollIntoView","err","console","error","search","onSubmit","input","type","onChange","currentTarget","value","placeholder","id","cooking","components_restaurant_list_RestaurantList","x","toString","__webpack_exports__","data","Helmet_default","a","title","Intro","callout","subtext","centered","pages_RestaurantSearch","__webpack_require__","d","Container","react__WEBPACK_IMPORTED_MODULE_0__","_Container_scss__WEBPACK_IMPORTED_MODULE_1__","_Container_scss__WEBPACK_IMPORTED_MODULE_1___default","n","children","container","Row","row","Intro_Intro","intro","Row_Row","intro__col","intro__text"],"mappings":"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","file":"component---src-pages-index-tsx-4e87871a300a7481df63.js","sourcesContent":["import Airtable from 'airtable';\n\nconst readOnlyApiKey = 'key2a9aPpR6jDvtau';\nconst appId = 'appKoO9jQuqptnJNk';\nconst base = new Airtable({ apiKey: readOnlyApiKey }).base(appId);\n\nexport const FetchRestaurants = (query) => {\n  return base('Restaurants').select({\n    // Selecting the first 100 records in Grid view:\n    maxRecords: 100,\n    view: 'Grid view',\n    filterByFormula: `OR(FIND(\"${query.toLowerCase()}\", LOWER({Who are they helping})), FIND(\"${query.toLowerCase()}\", LOWER(City)))`,\n  });\n};\n","import * as React from 'react';\n\nimport s from './RestaurantList.scss';\n\nexport const RestaurantList = ({ restaurants, pageSize }) => {\n  const [pageView, setPageView] = React.useState(1);\n  const showButton = restaurants.length > (pageSize*pageView);\n  const handleLoadMore = () => {\n    setPageView(p => p + 1);\n  }\n  const renderRestaurants = () => {\n    return restaurants.slice(0, pageView * pageSize).map((restaurant, index) => (\n    <>\n      <a key={`${restaurant.get('Restaurant Name')} ${restaurant.get('City')}`} href={restaurant.get('Link')} target=\"_blank\" className={s.restaurant}>\n        <strong>{restaurant.get('Restaurant Name')}</strong> is feeding <strong>{restaurant.get('Who are they helping')}</strong> in {restaurant.get('City')}.\n      </a><br />\n     </>\n    ));\n  };\n\n  return (\n    <>\n      {renderRestaurants()}\n      {showButton && (\n        <button className={s.button} onClick={handleLoadMore}>Show more</button>\n      )}\n    </>\n  );\n};\n\nexport default RestaurantList;\n","import * as React from 'react';\nimport Helmet from 'react-helmet';\nimport { graphql } from 'gatsby';\n\nimport { FetchRestaurants } from 'services/Airtable';\n\nimport { Intro } from 'components/intro/Intro';\nimport RestaurantList from 'components/restaurant-list/RestaurantList';\n\nimport s from './index.scss';\n\nconst RestaurantSearch = () => {\n  // tslint:disable-next-line:no-shadowed-variable\n  const [query, setQuery]: [\n    string,\n    React.Dispatch<React.SetStateAction<string>>\n  ] = React.useState('');\n  const [records, setRecords] = React.useState([]);\n  const handleChange = (e: any) => {\n    setQuery(e.currentTarget.value);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    FetchRestaurants(query).eachPage(\n      function page(results: [any], fetchNextPage: () => any) {\n        // This function (`page`) will get called for each page of records.\n\n        setRecords(results);\n        const element = document.getElementById('results');\n        if (element) {\n          element.scrollIntoView();\n        }\n\n        // To fetch the next page of records, call `fetchNextPage`.\n        // If there are more records, `page` will get called again.\n        // If there are no more records, `done` will get called.\n        fetchNextPage();\n      },\n      function done(err: any) {\n        if (err) {\n          console.error(err);\n          return;\n        }\n      }\n    );\n  };\n\n  return (\n    <>\n      <form className={s.search} onSubmit={handleSubmit}>\n        <input\n          className={s.input}\n          type=\"text\"\n          onChange={handleChange}\n          value={query}\n          placeholder=\"Find a city or hospital\"\n        />\n        <button className={s.button} onClick={handleSubmit}>\n          Find it\n        </button>\n      </form>\n      {records.length > 0 && (\n        <div id=\"results\">\n          <h2 className={s.cooking}>Who's cooking near you?</h2>\n          <RestaurantList\n            key={records.map((x) => x.get('Restaurant Name')).toString()}\n            pageSize={5}\n            restaurants={records}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ({ data }: { data: any }) => (\n  <>\n    <Helmet title=\"Home\" />\n    <Intro>\n      Working from home? Might as well\n      <br />\n      <h1 className={s.callout}>\n        <strong>Give</strong> your lunch money\n      </h1>\n      <br />\n      <p className={s.subtext}>\n        <strong>Donate your lunch money</strong> to a local restaurant cooking\n        meals for hospital workers.\n      </p>\n    </Intro>\n    <div className={s.centered}>\n      <RestaurantSearch />\n    </div>\n  </>\n);\n","import * as React from 'react';\n\nimport s from './Container.scss';\n\ninterface IContainerProps {\n  children: React.ReactNode;\n}\n\nexport const Container = ({ children }: IContainerProps) => (\n  <section className={s.container}>\n    {children}\n  </section>\n);\n","import * as React from 'react';\n\nimport s from './Row.scss';\n\ninterface IRowProps {\n  children: React.ReactNode;\n}\n\nexport const Row = ({ children }: IRowProps) => (\n  <div className={s.row}>\n    {children}\n  </div>\n);\n","import * as React from 'react';\n\nimport { Container } from 'components/container/Container';\nimport { Row } from 'components/row/Row';\n\nimport s from './Intro.scss';\n\ninterface IIntroProps {\n  children: React.ReactNode;\n}\n\nexport const Intro = ({ children }: IIntroProps) => {\n  return (\n    <Container>\n      <div className={s.intro}>\n        <Row>\n          <div className={s.intro__col}>\n            <p className={s.intro__text}>\n              {children}\n            </p>\n          </div>\n        </Row>\n      </div>\n    </Container>\n  );\n};\n"],"sourceRoot":""}